<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  <meta name="generator" content="Hugo 0.69.0" />

  
  <meta name="description" content="Personal blog of Sojjwal Kelkar">
  

  
  <link rel="apple-touch-icon" sizes="180x180" href="https://sskelkar.github.io/apple-touch-icon.png">

  
  <link rel="icon" type="image/png" sizes="32x32" href="https://sskelkar.github.io/favicon-32x32.png">

  
  <link rel="icon" type="image/png" sizes="16x16" href="https://sskelkar.github.io/favicon-16x16.png">

  
  <link rel="manifest" href="https://sskelkar.github.io/site.webmanifest">

  
  <link rel="mask-icon" href="https://sskelkar.github.io/safari-pinned-tab.svg" color="#5bbad5">

  <meta name="msapplication-TileColor" content="#da532c">

  <meta name="theme-color" content="#ffffff">

  
  <link rel="stylesheet" href="https://sskelkar.github.io/css/bootstrap.min.css" />

  
  <title>Setting up a JavaScript project in 2017 | betweencurlybraces</title>
  

  <style>
body {
  min-width: 300px;
}

.custom-navbar {
  margin-bottom: 1em;
  height: 60px;
}

.custom-navbar a {
  display: inline-block; 
  padding: 18px 0;
  margin-right: 1em; 
  font-weight: bold; 
}

.custom-navbar a:hover,
.custom-navbar a:focus {
  text-decoration: none; 
}

@media print {
  .custom-navbar {
    display: none;
  }
}

article {
  padding-bottom: 1em;
}

img {
  max-width: 100%;
}


body {
  background-color: #fff;
}



body {
  color: #212529;
}



a {
  color: #007bff;
}



a:hover,
a:focus {
  color: #0056b3;
}



.custom-navbar {
  background-color: #212529;
}



.custom-navbar a {
  color: rgba(255, 255, 255, 0.75);
}



.custom-navbar a:hover,
.custom-navbar a:focus {
  color: rgba(255, 255, 255, 1);
}



.container {
  max-width: 800px;
}



pre {
  display: block;
  padding: 9.5px;
  word-break: break-all;
  word-wrap: break-word;
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
}

pre code {
  padding: 0;
  font-size: inherit;
  color: inherit; 
  white-space: pre-wrap;
  background-color: transparent;
  border: none;
  border-radius: 0;
}

code {
  padding: 2px 4px;
  color: inherit; 
  background-color: #f5f5f5;
  border: 1px solid #ccc;
  border-radius: 4px;
  font-size: .9em;
}



blockquote,
.blockquote {
  padding: 10px 20px;
  margin: 0 0 20px;
  font-size: 1em;
  border-left: 5px solid #6c757d;
}

</style>
</head>

<body>
  <nav class="custom-navbar">
  <div class="container">
    
    <a href="/">Blog</a>
    
    <a href="/tags/">Tags</a>
    
    <a href="/about/">About</a>
    

    <a href="/index.xml">
      <i class="fa fa-rss-square" style="font-size:17px;color:white;"></i>
    </a>
  </div>
</nav>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">


  
  <div class="container">
    <article>
      <h1>Setting up a JavaScript project in 2017</h1>
<p>
  <small class="text-secondary">
  
  
  Posted on Jan 2017
    by
    <b>Sojjwal Kelkar</b>
    &nbsp;|&nbsp;
  15 min read
    &nbsp;&nbsp;
  </small>
  

<small><code><a href="https://sskelkar.github.io/tags/javascript">JavaScript</a></code></small>


<small><code><a href="https://sskelkar.github.io/tags/unit-testing">Unit Testing</a></code></small>

</p>
<h2 id="heading"></h2>
<p>Creating a front-end JavaScript project can be a daunting task due to the sheer volume of choices available while deciding the tech stack. First, you need to decide the JavaScript framework or library for your project. Do you plan to use the latest ES2015 language features in your code? If yes, then you need a transpiler because your browser probably doesn’t support them yet. Then you require a bundling tool to get your code loaded in the browser. You may want to minify the code for faster load time. To automate all these steps, you need a build script. You may want to deploy your project on a local web server during development. Some setup is required for that. Finally, you need to include some testing framework in your project to write unit tests.</p>
<p>In this post I’ll demonstrate all of the above steps by incorporating all the necessary tools in a simple <code>React</code> project. I would use <code>Babel</code> to compile the project and <code>Browserify</code> to create the bundle. I would write a simple <code>Grunt</code> script to automate these steps. I’ll use <code>Express</code>, the web application framework provided by Nodejs for local deployment. For unit tests I’ll use the <code>Mocha</code> framework, backed by the assertion libraries provided by <code>Chai</code>. Because it is a React project, I’ll use <code>Enzyme</code> library to test the React components.</p>
<p>While this is not the most up to date way to create a React project, you are likely to encounter many existing projects that follow a similar build process.</p>
<p>The complete source code for the project set up described in the rest of this post is present in <a href="https://github.com/sskelkar/react-setup-example">this Github repo</a>.
This post is divided into four parts: setting up a simple React project, building the project, implementing unit tests and deploying the application on a local web server.</p>
<h3 id="1-setting-up-a-simple-react-project">1. Setting up a simple React project</h3>
<p><strong>i.</strong> Create a new folder for the project. In command prompt, run the following command to create <code>package.json</code> and provide basic project information:</p>
<pre><code>npm init
</code></pre><p><strong>ii.</strong> Add React dependencies in your <code>package.json</code> using following command:</p>
<pre><code>npm install react react-dom --save-dev
</code></pre><p>The <code>--save-dev</code> option downloads the specified libraries in the node_modules folder in your project root folder and adds their name and version numbers in <code>package.json</code> as <code>devDependencies</code>.</p>
<p><strong>iii.</strong> Create a new <code>src</code> folder and add <code>index.html</code> file in it with the following content:
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html"><span style="color:#8f5902;font-style:italic">&lt;!DOCTYPE html&gt;</span>
<span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">html</span><span style="color:#000;font-weight:bold">&gt;</span>
<span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">head</span><span style="color:#000;font-weight:bold">&gt;</span>
    <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">meta</span> <span style="color:#c4a000">charset</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;utf-8&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>
    <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">link</span> <span style="color:#c4a000">href</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#39;http://fonts.googleapis.com/css?family=Roboto:400,300,700&#39;</span> <span style="color:#c4a000">rel</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#39;stylesheet&#39;</span> <span style="color:#c4a000">type</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#39;text/css&#39;</span><span style="color:#000;font-weight:bold">&gt;</span>
    <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">link</span> <span style="color:#c4a000">href</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;css/styles.css&#34;</span> <span style="color:#c4a000">rel</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;stylesheet&#34;</span> <span style="color:#c4a000">type</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;text/css&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>
<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">head</span><span style="color:#000;font-weight:bold">&gt;</span>
  <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">body</span><span style="color:#000;font-weight:bold">&gt;</span>
    <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">div</span> <span style="color:#c4a000">id</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;app&#34;</span><span style="color:#000;font-weight:bold">&gt;&lt;/</span><span style="color:#204a87;font-weight:bold">div</span><span style="color:#000;font-weight:bold">&gt;</span>
    <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">script</span> <span style="color:#c4a000">src</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;bundle.js&#34;</span><span style="color:#000;font-weight:bold">&gt;&lt;/</span><span style="color:#204a87;font-weight:bold">script</span><span style="color:#000;font-weight:bold">&gt;</span>
  <span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">body</span><span style="color:#000;font-weight:bold">&gt;</span>
<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">html</span><span style="color:#000;font-weight:bold">&gt;</span></code></pre></div></p>
<p><strong>iv</strong>. Create a sub-folder <code>js</code> in <code>src</code> and create our sole React component <code>src/js/app.js</code> as following:
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-JavaScript" data-lang="JavaScript"><span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">React</span> <span style="color:#000">from</span> <span style="color:#4e9a06">&#39;react&#39;</span><span style="color:#000;font-weight:bold">;</span>

<span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">App</span> <span style="color:#204a87;font-weight:bold">extends</span> <span style="color:#000">React</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Component</span> <span style="color:#000;font-weight:bold">{</span>
  <span style="color:#000">render</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">(</span>
      <span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">div</span><span style="color:#ce5c00;font-weight:bold">&gt;&lt;</span><span style="color:#000">h2</span><span style="color:#ce5c00;font-weight:bold">&gt;</span><span style="color:#000">Helloooo</span> <span style="color:#000">World</span><span style="color:#ce5c00;font-weight:bold">!!&lt;</span><span style="color:#a40000">/h2&gt;&lt;/div&gt;</span>
    <span style="color:#000;font-weight:bold">);</span>
  <span style="color:#000;font-weight:bold">}</span>
<span style="color:#000;font-weight:bold">}</span>

<span style="color:#204a87;font-weight:bold">export</span> <span style="color:#204a87;font-weight:bold">default</span> <span style="color:#000">App</span><span style="color:#000;font-weight:bold">;</span>
</code></pre></div>
Here, we have created a simple React component to display a message on the web page. But we need a way to hook this component into our base <code>index.html</code>.</p>
<p><strong>v.</strong> Create <code>index.js</code> in the <code>src</code> folder that would simply render the app component inside a div tag in <code>index.html</code>.
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-JavaScript" data-lang="JavaScript"><span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">ReactDOM</span> <span style="color:#000">from</span> <span style="color:#4e9a06">&#39;react-dom&#39;</span><span style="color:#000;font-weight:bold">;</span>
<span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">React</span> <span style="color:#000">from</span> <span style="color:#4e9a06">&#39;react&#39;</span><span style="color:#000;font-weight:bold">;</span>
<span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">App</span> <span style="color:#000">from</span> <span style="color:#4e9a06">&#39;./js/app&#39;</span><span style="color:#000;font-weight:bold">;</span>

<span style="color:#000">ReactDOM</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">render</span><span style="color:#000;font-weight:bold">(</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">App</span><span style="color:#ce5c00;font-weight:bold">/&gt;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87">document</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">getElementById</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;app&#34;</span><span style="color:#000;font-weight:bold">));</span>
</code></pre></div>
At this point your folder structure would look like this:</p>
<pre><code>root
|____ node_modules
|____ package.json
|____ src
      |____ index.html
      |____ index.js
      |____ js
            |____ app.js
</code></pre><h3 id="2-building-the-project">2. Building the project</h3>
<p>In this part we would write a <code>Grunt</code> script to automate the task of compiling the project and creating a bundle. The bundle would be saved in <code>build</code> folder at the root level. We would use grunt plugins that would provide us some inbuilt tasks, which we can configure as per our requirement. Then we would write a custom grunt task to execute the plugin tasks in correct sequence.</p>
<p><strong>i.</strong> Add grunt to you project with the following command:</p>
<pre><code>npm install grunt --save-dev
</code></pre><p><strong>ii.</strong> During our build process, our first step would be to delete the <code>build</code> folder. We need to add <code>grunt-contrib-clean</code> plugin to our project that would provide us with the <code>clean</code> task.</p>
<pre><code>npm install grunt-contrib-clean --save-dev
</code></pre><p><strong>iii.</strong> We have the <code>grunt clean</code> task now. But we need to tell it which folders to delete. We need to load the <code>grunt-contrib-clean</code> task in the script using <code>grunt.loadNpmTasks</code> method and configure this task to delete the <code>build</code> folder using <code>grunt.initConfig</code> method. So now let&rsquo;s create <code>Gruntfile.js</code> in the root folder.
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-JavaScript" data-lang="JavaScript"><span style="color:#204a87;font-weight:bold">var</span> <span style="color:#000">grunt</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">require</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;grunt&#39;</span><span style="color:#000;font-weight:bold">);</span>

<span style="color:#000">grunt</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">loadNpmTasks</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;grunt-contrib-clean&#39;</span><span style="color:#000;font-weight:bold">);</span>

<span style="color:#000">grunt</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">initConfig</span><span style="color:#000;font-weight:bold">({</span>
  <span style="color:#000">clean</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[</span><span style="color:#4e9a06">&#39;build&#39;</span><span style="color:#000;font-weight:bold">]</span>
<span style="color:#000;font-weight:bold">});</span>
</code></pre></div></p>
<p><strong>iv.</strong> Next step is to copy our <code>index.html</code> as it is into the <code>build</code> folder. We do this so that later when we want to locally deploy the project, we can serve the base html file directly from the <code>build</code> folder along with the bundle. We need to add <code>grunt-contrib-copy</code> plugin to our project and configure the source and destination locations of the file to be copied.</p>
<pre><code>npm install grunt-contrib-copy --save-dev
</code></pre><p>The <code>Gruntfile.js</code> would look like following:
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-JavaScript" data-lang="JavaScript"><span style="color:#204a87;font-weight:bold">var</span> <span style="color:#000">grunt</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">require</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;grunt&#39;</span><span style="color:#000;font-weight:bold">);</span>

<span style="color:#000">grunt</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">loadNpmTasks</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;grunt-contrib-clean&#39;</span><span style="color:#000;font-weight:bold">);</span>
<span style="color:#000">grunt</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">loadNpmTasks</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;grunt-contrib-copy&#39;</span><span style="color:#000;font-weight:bold">);</span>

<span style="color:#000">grunt</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">initConfig</span><span style="color:#000;font-weight:bold">({</span>
  <span style="color:#000">clean</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[</span><span style="color:#4e9a06">&#39;build&#39;</span><span style="color:#000;font-weight:bold">],</span>
  <span style="color:#000">copy</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#000">html</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
      <span style="color:#000">options</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
        <span style="color:#000">flatten</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">true</span>
      <span style="color:#000;font-weight:bold">},</span>
      <span style="color:#000">files</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
        <span style="color:#4e9a06">&#39;build/index.html&#39;</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#4e9a06">&#39;src/index.html&#39;</span>
      <span style="color:#000;font-weight:bold">}</span>
    <span style="color:#000;font-weight:bold">}</span>
  <span style="color:#000;font-weight:bold">}</span>
<span style="color:#000;font-weight:bold">});</span>
</code></pre></div></p>
<p><strong>v.</strong> Now on to the compilation step. We would use <code>Babel</code> to both compile React code into plain JavaScript, as well as, ES2015 language features into older JS syntax. Babel provides us with presets for these transformations. A Babel preset is a collection of plugins to perform a particular task. We can include the Babel presets relevant to us as following:</p>
<pre><code>npm install babel-preset-react babel-preset-es2015 --save-dev
</code></pre><p><strong>vi.</strong> Installing the Babel presets in our project isn’t enough. We need to enable them by adding <code>.babelrc</code> file as following in the root folder.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#000;font-weight:bold">{</span>
  <span style="color:#4e9a06">&#34;presets&#34;</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[</span><span style="color:#4e9a06">&#34;react&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;es2015&#34;</span><span style="color:#000;font-weight:bold">],</span>
<span style="color:#000;font-weight:bold">}</span>
</code></pre></div><p><strong>vii.</strong> We are going to use <code>Browserify</code> as our bundling tool. It would first execute the transformation step and then it would create the <code>bundle.js</code>. Since we are using Babel in the first step, we need to get it working with Browserify. So we would add <code>Babelify</code>, a Babel transformer specifically created for Browserify, to our project.</p>
<pre><code>npm install babelify --save-dev
</code></pre><p>We would also add the <code>grunt-browserify</code> plugin.</p>
<pre><code>npm install grunt-browserify --save-dev
</code></pre><p><strong>viii.</strong> Now we need to configure the <code>browserify</code> task in our grunt script. We would specify <code>babelify</code> with appropriate presets as the transformer. We also need to specify the starting point of our React project. That would be <code>index.js</code>, where we hook up our React component into <code>index.html</code>. We also need to give the name and desired location of the bundle file.
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-JavaScript" data-lang="JavaScript"><span style="color:#204a87;font-weight:bold">var</span> <span style="color:#000">grunt</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">require</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;grunt&#39;</span><span style="color:#000;font-weight:bold">);</span>

<span style="color:#000">grunt</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">loadNpmTasks</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;grunt-contrib-clean&#39;</span><span style="color:#000;font-weight:bold">);</span>
<span style="color:#000">grunt</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">loadNpmTasks</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;grunt-contrib-copy&#39;</span><span style="color:#000;font-weight:bold">);</span>
<span style="color:#000">grunt</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">loadNpmTasks</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;grunt-browserify&#39;</span><span style="color:#000;font-weight:bold">);</span>

<span style="color:#000">grunt</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">initConfig</span><span style="color:#000;font-weight:bold">({</span>
  <span style="color:#000">clean</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[</span><span style="color:#4e9a06">&#39;build&#39;</span><span style="color:#000;font-weight:bold">],</span>
  <span style="color:#000">copy</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#000">html</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
      <span style="color:#000">options</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
        <span style="color:#000">flatten</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">true</span>
      <span style="color:#000;font-weight:bold">},</span>
      <span style="color:#000">files</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
        <span style="color:#4e9a06">&#39;build/index.html&#39;</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#4e9a06">&#39;src/index.html&#39;</span>
      <span style="color:#000;font-weight:bold">}</span>
    <span style="color:#000;font-weight:bold">}</span>
  <span style="color:#000;font-weight:bold">},</span>
  <span style="color:#000">browserify</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#000">dist</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
      <span style="color:#000">files</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
        <span style="color:#4e9a06">&#39;build/bundle.js&#39;</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[</span><span style="color:#4e9a06">&#39;src/index.js&#39;</span><span style="color:#000;font-weight:bold">]</span>
      <span style="color:#000;font-weight:bold">},</span>
      <span style="color:#000">options</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
        <span style="color:#000">transform</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[[</span> <span style="color:#4e9a06">&#39;babelify&#39;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000;font-weight:bold">{</span> <span style="color:#4e9a06">&#39;presets&#39;</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[</span> <span style="color:#4e9a06">&#39;es2015&#39;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#39;react&#39;</span> <span style="color:#000;font-weight:bold">]</span> <span style="color:#000;font-weight:bold">}</span>  <span style="color:#000;font-weight:bold">]]</span>
      <span style="color:#000;font-weight:bold">}</span>
    <span style="color:#000;font-weight:bold">}</span>
  <span style="color:#000;font-weight:bold">}</span>
<span style="color:#000;font-weight:bold">});</span>
</code></pre></div>
<strong>ix.</strong> Finally, we need to create a custom build task in the grunt file that should execute clean, copy and browserify tasks, in that order. Our final <code>Gruntfile.js</code> would look like this:
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-JavaScript" data-lang="JavaScript"><span style="color:#204a87;font-weight:bold">var</span> <span style="color:#000">grunt</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">require</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;grunt&#39;</span><span style="color:#000;font-weight:bold">);</span>

<span style="color:#000">grunt</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">loadNpmTasks</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;grunt-contrib-clean&#39;</span><span style="color:#000;font-weight:bold">);</span>
<span style="color:#000">grunt</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">loadNpmTasks</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;grunt-contrib-copy&#39;</span><span style="color:#000;font-weight:bold">);</span>
<span style="color:#000">grunt</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">loadNpmTasks</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;grunt-browserify&#39;</span><span style="color:#000;font-weight:bold">);</span>

<span style="color:#000">grunt</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">initConfig</span><span style="color:#000;font-weight:bold">({</span>
  <span style="color:#000">clean</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[</span><span style="color:#4e9a06">&#39;build&#39;</span><span style="color:#000;font-weight:bold">],</span>
  <span style="color:#000">copy</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#000">html</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
      <span style="color:#000">options</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
        <span style="color:#000">flatten</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">true</span>
      <span style="color:#000;font-weight:bold">},</span>
      <span style="color:#000">files</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
        <span style="color:#4e9a06">&#39;build/index.html&#39;</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#4e9a06">&#39;src/index.html&#39;</span>
      <span style="color:#000;font-weight:bold">}</span>
    <span style="color:#000;font-weight:bold">}</span>
  <span style="color:#000;font-weight:bold">},</span>
  <span style="color:#000">browserify</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#000">dist</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
      <span style="color:#000">files</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
        <span style="color:#4e9a06">&#39;build/bundle.js&#39;</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[</span><span style="color:#4e9a06">&#39;src/index.js&#39;</span><span style="color:#000;font-weight:bold">]</span>
      <span style="color:#000;font-weight:bold">},</span>
      <span style="color:#000">options</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
        <span style="color:#000">transform</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[[</span> <span style="color:#4e9a06">&#39;babelify&#39;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000;font-weight:bold">{</span> <span style="color:#4e9a06">&#39;presets&#39;</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[</span> <span style="color:#4e9a06">&#39;es2015&#39;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#39;react&#39;</span> <span style="color:#000;font-weight:bold">]</span> <span style="color:#000;font-weight:bold">}</span>  <span style="color:#000;font-weight:bold">]]</span>
      <span style="color:#000;font-weight:bold">}</span>
    <span style="color:#000;font-weight:bold">}</span>
  <span style="color:#000;font-weight:bold">}</span>
<span style="color:#000;font-weight:bold">});</span>

<span style="color:#000">grunt</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">registerTask</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;build&#39;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000;font-weight:bold">[</span><span style="color:#4e9a06">&#39;clean&#39;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#39;copy:html&#39;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#39;browserify:dist&#39;</span><span style="color:#000;font-weight:bold">]);</span>
</code></pre></div>
At this point our project structure would look like this:</p>
<pre><code>root
|____ .babelrc
|____ build
|____ Gruntfile.js
|____ node_modules
|____ package.json
|____ src
      |____ index.html
      |____ index.js
      |____ js
            |____ app.js
</code></pre><h3 id="3-adding-unit-tests">3. Adding unit tests</h3>
<p><strong>i.</strong> We would use <code>Mocha</code> as our primary test runner. For an expressive assertion library we would use <code>Chai</code>. We also need to add two other testing libraries – <code>Enzyme</code> and <code>react-addons-test-utils</code>. These are React specific. To run tests in a simulated browser environment, we need <code>jsdom</code>.</p>
<pre><code>npm install --save-dev mocha chai enzyme jsdom react-addons-test-utils
</code></pre><p><strong>ii.</strong> We would create a new <code>test</code> folder in our root folder. To test our components in a realistic browser environment, we need to create a setup file <code>browser.js</code> in our test folder as following:
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-JavaScript" data-lang="JavaScript"><span style="color:#000">require</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;babel-register&#39;</span><span style="color:#000;font-weight:bold">)();</span>

<span style="color:#204a87;font-weight:bold">var</span> <span style="color:#000">jsdom</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">require</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;jsdom&#39;</span><span style="color:#000;font-weight:bold">).</span><span style="color:#000">jsdom</span><span style="color:#000;font-weight:bold">;</span>

<span style="color:#204a87;font-weight:bold">var</span> <span style="color:#000">exposedProperties</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">[</span><span style="color:#4e9a06">&#39;window&#39;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#39;navigator&#39;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#39;document&#39;</span><span style="color:#000;font-weight:bold">];</span>

<span style="color:#000">global</span><span style="color:#000;font-weight:bold">.</span><span style="color:#204a87">document</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">jsdom</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;&#39;</span><span style="color:#000;font-weight:bold">);</span>
<span style="color:#000">global</span><span style="color:#000;font-weight:bold">.</span><span style="color:#204a87">window</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#204a87">document</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">defaultView</span><span style="color:#000;font-weight:bold">;</span>
<span style="color:#204a87">Object</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">keys</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87">document</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">defaultView</span><span style="color:#000;font-weight:bold">).</span><span style="color:#000">forEach</span><span style="color:#000;font-weight:bold">((</span><span style="color:#000">property</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">=&gt;</span> <span style="color:#000;font-weight:bold">{</span>
  <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">typeof</span> <span style="color:#000">global</span><span style="color:#000;font-weight:bold">[</span><span style="color:#000">property</span><span style="color:#000;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">===</span> <span style="color:#4e9a06">&#39;undefined&#39;</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#000">exposedProperties</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">push</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">property</span><span style="color:#000;font-weight:bold">);</span>
    <span style="color:#000">global</span><span style="color:#000;font-weight:bold">[</span><span style="color:#000">property</span><span style="color:#000;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#204a87">document</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">defaultView</span><span style="color:#000;font-weight:bold">[</span><span style="color:#000">property</span><span style="color:#000;font-weight:bold">];</span>
  <span style="color:#000;font-weight:bold">}</span>
<span style="color:#000;font-weight:bold">});</span>

<span style="color:#000">global</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">navigator</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">{</span>
  <span style="color:#000">userAgent</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#4e9a06">&#39;node.js&#39;</span>
<span style="color:#000;font-weight:bold">};</span>

<span style="color:#000">documentRef</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#204a87">document</span><span style="color:#000;font-weight:bold">;</span>
</code></pre></div>
<strong>iii.</strong> To have our <code>test</code> folder structure mirror the <code>src</code> folder, we would create <code>test/js</code> sub folder. Here, we can create an <code>app.spec.js</code> file that would contain unit tests specific to the <code>App</code> component. We can write a test case to assert the message being displayed by this component as following:
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-JavaScript" data-lang="JavaScript"><span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">React</span> <span style="color:#000">from</span> <span style="color:#4e9a06">&#39;react&#39;</span><span style="color:#000;font-weight:bold">;</span>
<span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000;font-weight:bold">{</span> <span style="color:#000">expect</span> <span style="color:#000;font-weight:bold">}</span> <span style="color:#000">from</span> <span style="color:#4e9a06">&#39;chai&#39;</span><span style="color:#000;font-weight:bold">;</span>
<span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000;font-weight:bold">{</span> <span style="color:#000">mount</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">shallow</span> <span style="color:#000;font-weight:bold">}</span> <span style="color:#000">from</span> <span style="color:#4e9a06">&#39;enzyme&#39;</span><span style="color:#000;font-weight:bold">;</span>
<span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">App</span> <span style="color:#000">from</span> <span style="color:#4e9a06">&#39;../../src/js/app&#39;</span><span style="color:#000;font-weight:bold">;</span>

<span style="color:#000">describe</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;&lt;App /&gt;&#39;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">=&gt;</span> <span style="color:#000;font-weight:bold">{</span>
  <span style="color:#000">it</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;should render the hello world message&#39;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">=&gt;</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#204a87;font-weight:bold">const</span> <span style="color:#000">wrapper</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">shallow</span><span style="color:#000;font-weight:bold">(</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">App</span><span style="color:#ce5c00;font-weight:bold">/&gt;</span><span style="color:#000;font-weight:bold">);</span>
    <span style="color:#000">expect</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">wrapper</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">find</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;h2&#39;</span><span style="color:#000;font-weight:bold">).</span><span style="color:#000">text</span><span style="color:#000;font-weight:bold">()).</span><span style="color:#000">to</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">equal</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;Helloooo World!!&#39;</span><span style="color:#000;font-weight:bold">);</span>
  <span style="color:#000;font-weight:bold">});</span>
<span style="color:#000;font-weight:bold">});</span>
</code></pre></div>
<strong>iv.</strong> Finally, we need to add the following <code>scripts</code> block in <code>package.json</code>. Now unit tests throughout the project can be run with <code>npm test</code> command. Alternatively, a task to run the unit tests can also be created in the grunt script.</p>
<pre><code>&quot;scripts&quot;: {
    &quot;test&quot;: &quot;mocha test/browser.js test/**/*.spec.js&quot;
}
</code></pre><h3 id="4-deploying-the-application-on-a-local-web-server">4. Deploying the application on a local web server</h3>
<p><strong>i.</strong> We will use <code>Express</code>, a web application framework provided by Node.js.</p>
<pre><code>npm install express --save
</code></pre><p><strong>ii.</strong> Then we need to create a <code>server.js</code> file in the root folder. In this file, we specify the location of the html that is to be served on the browser and the port number on which the server should run.
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-JavaScript" data-lang="JavaScript"><span style="color:#204a87;font-weight:bold">var</span> <span style="color:#000">express</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">require</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;express&#39;</span><span style="color:#000;font-weight:bold">);</span>

<span style="color:#204a87;font-weight:bold">var</span> <span style="color:#000">app</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">express</span><span style="color:#000;font-weight:bold">();</span>

<span style="color:#000">app</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">use</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;/&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">express</span><span style="color:#000;font-weight:bold">.</span><span style="color:#204a87;font-weight:bold">static</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;build&#34;</span><span style="color:#000;font-weight:bold">));</span>

<span style="color:#000">app</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">get</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;*&#39;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">function</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">req</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">res</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#000">res</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">sendFile</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;index.html&#39;</span><span style="color:#000;font-weight:bold">,</span>  <span style="color:#000;font-weight:bold">{</span> <span style="color:#000">root</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;build&#34;</span> <span style="color:#000;font-weight:bold">});</span>
<span style="color:#000;font-weight:bold">});</span>

<span style="color:#000">app</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">listen</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;3000&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">function</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
  <span style="color:#000">console</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">log</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;Starting server..&#39;</span><span style="color:#000;font-weight:bold">);</span>
<span style="color:#000;font-weight:bold">});</span>
</code></pre></div>
<strong>iii.</strong> Use <code>npm start</code> to start the server and open <a href="http://localhost:3000">http://localhost:3000</a> on the browser.</p>
<p>The final project structure will look like this:</p>
<pre><code>root
|____ .babelrc
|____ build
|____ Gruntfile.js
|____ node_modules
|____ package.json
|____ server.js
|____ src
|     |____ index.html
|     |____ index.js
|     |____ js
|           |____ app.js
|____ test
      |____ browser.js
      |____ js
            |____ app.spec.js
</code></pre>

<a href="#top">Top</a>
    </article>
  </div>

  
  
  
  <script>
  window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
  ga('create', 'UA-123456789-1', 'auto');
  ga('send', 'pageview');
  </script>
  <script async src='https://www.google-analytics.com/analytics.js'></script>
  

  

  
</body>

</html>
