<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/WebPage">
  <head>
    

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

  <title>Setting up a JavaScript project in 2017 - Sojjwal Kelkar</title>
  <meta name="description" content="Creating a front-end JavaScript project can be a daunting task due to the sheer volume of choices available while deciding the tech stack. First, you need to decide the JavaScript framework or library for your project. Do you plan to use the latest ES2015 language features in your code? If yes, then you need a transpiler because your browser probably doesn’t support them yet. Then you require a bundling tool to get your code loaded in the browser.">
  <meta name="author" content="Sojjwal Kelkar"/><script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "WebSite",
    "name": "Sojjwal Kelkar",
    
    "url": "https:\/\/sskelkar.github.io\/"
}
</script><script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Organization",
  "name": "",
  "url": "https:\/\/sskelkar.github.io\/"
  
  
  
  
}
</script>
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [{
        "@type": "ListItem",
        "position": 1,
        "item": {
          "@id": "https:\/\/sskelkar.github.io\/",
          "name": "home"
        }
    },{
        "@type": "ListItem",
        "position": 3,
        "item": {
          "@id": "https:\/\/sskelkar.github.io\/post\/setting-up-a-javascript-project-in-2017\/",
          "name": "Setting up a java script project in 2017"
        }
    }]
}
</script><script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Article",
  "author": {
    "name" : "Sojjwal Kelkar"
  },
  "headline": "Setting up a JavaScript project in 2017",
  "description" : "Creating a front-end JavaScript project can be a daunting task due to the sheer volume of choices available while deciding the tech stack. First, you need to decide the JavaScript framework or library for your project. Do you plan to use the latest ES2015 language features in your code? If yes, then you need a transpiler because your browser probably doesn’t support them yet. Then you require a bundling tool to get your code loaded in the browser.",
  "inLanguage" : "en",
  "wordCount":  1654 ,
  "datePublished" : "2017-01-14T00:00:00",
  "dateModified" : "2017-01-14T00:00:00",
  "image" : "https:\/\/sskelkar.github.io\/",
  "keywords" : [ "JavaScript, Unit Testing" ],
  "mainEntityOfPage" : "https:\/\/sskelkar.github.io\/post\/setting-up-a-javascript-project-in-2017\/",
  "publisher" : {
    "@type": "Organization",
    "name" : "https:\/\/sskelkar.github.io\/",
    "logo" : {
        "@type" : "ImageObject",
        "url" : "https:\/\/sskelkar.github.io\/",
        "height" :  60 ,
        "width" :  60
    }
  }
}
</script>

<meta property="og:title" content="Setting up a JavaScript project in 2017" />
<meta property="og:description" content="Creating a front-end JavaScript project can be a daunting task due to the sheer volume of choices available while deciding the tech stack. First, you need to decide the JavaScript framework or library for your project. Do you plan to use the latest ES2015 language features in your code? If yes, then you need a transpiler because your browser probably doesn’t support them yet. Then you require a bundling tool to get your code loaded in the browser.">
<meta property="og:url" content="https://sskelkar.github.io/post/setting-up-a-javascript-project-in-2017/" />
<meta property="og:type" content="website" />
<meta property="og:site_name" content="Sojjwal Kelkar" />

  <meta name="twitter:title" content="Setting up a JavaScript project in 2017" />
  <meta name="twitter:description" content="Creating a front-end JavaScript project can be a daunting task due to the sheer volume of choices available while deciding the tech stack. First, you need to decide the JavaScript framework or library …">
  <meta name="twitter:card" content="summary" />
  <meta name="generator" content="Hugo 0.79.0" />
  <link rel="alternate" href="https://sskelkar.github.io/index.xml" type="application/rss+xml" title="Sojjwal Kelkar"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css" integrity="sha384-9eLZqc9ds8eNjO3TmqPeYcDj8n+Qfa4nuSiGYa6DjLNcv9BtN69ZIulL9+8CqC9Y" crossorigin="anonymous">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"><link rel="stylesheet" href="https://sskelkar.github.io/css/main.css" /><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" />
  <link rel="stylesheet" href="https://sskelkar.github.io/css/highlight.min.css" /><link rel="stylesheet" href="https://sskelkar.github.io/css/codeblock.css" /><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.css" integrity="sha384-h/L2W9KefUClHWaty3SLE5F/qvc4djlyR4qY3NUV5HGQBBW7stbcfff1+I/vmsHh" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/default-skin/default-skin.min.css" integrity="sha384-iD0dNku6PYSIQLyfTOpB06F2KCZJAKLOThS5HRe8b3ibhdEQ6eKsFf/EeFxdOt5R" crossorigin="anonymous">



  </head>
  <body>
    <nav class="navbar navbar-default navbar-fixed-top navbar-custom">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="https://sskelkar.github.io/">Sojjwal Kelkar</a>
    </div>

    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
        
          
            <li>
              <a title="Tech Blog" href="/">Tech Blog</a>
            </li>
          
        
          
            <li>
              <a title="Cartoons" href="/cartoons">Cartoons</a>
            </li>
          
        
          
            <li>
              <a title="About" href="/about">About</a>
            </li>
          
        
          
            <li>
              <a title="Tags" href="/tags">Tags</a>
            </li>
          
        

        

        
      </ul>
    </div>

    

  </div>
</nav>




    


<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>













<header class="header-section ">
  
  <div class="intro-header no-img">
    
    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
          <div class="post-heading">
            <h1>Setting up a JavaScript project in 2017</h1>
            <span class="post-meta">
  
  
  <i class="fas fa-calendar"></i>&nbsp;Posted on Jan 14, 2017
  
  
    &nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;8&nbsp;minutes
  
  
  
  
</span>


          </div>
        </div>
      </div>
    </div>
    
  </div>
</header>


    
<div class="container" role="main">
  <div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
      
      <article role="main" class="blog-post">
      
        <h2 id="heading"></h2>
<p>Creating a front-end JavaScript project can be a daunting task due to the sheer volume of choices available while deciding the tech stack. First, you need to decide the JavaScript framework or library for your project. Do you plan to use the latest ES2015 language features in your code? If yes, then you need a transpiler because your browser probably doesn’t support them yet. Then you require a bundling tool to get your code loaded in the browser. You may want to minify the code for faster load time. To automate all these steps, you need a build script. You may want to deploy your project on a local web server during development. Some setup is required for that. Finally, you need to include some testing framework in your project to write unit tests.</p>
<p>In this post I’ll demonstrate all of the above steps by incorporating all the necessary tools in a simple <code>React</code> project. I would use <code>Babel</code> to compile the project and <code>Browserify</code> to create the bundle. I would write a simple <code>Grunt</code> script to automate these steps. I’ll use <code>Express</code>, the web application framework provided by Nodejs for local deployment. For unit tests I’ll use the <code>Mocha</code> framework, backed by the assertion libraries provided by <code>Chai</code>. Because it is a React project, I’ll use <code>Enzyme</code> library to test the React components.</p>
<p>While this is not the most up to date way to create a React project, you are likely to encounter many existing projects that follow a similar build process.</p>
<p>The complete source code for the project set up described in the rest of this post is present in <a href="https://github.com/sskelkar/react-setup-example">this Github repo</a>.
This post is divided into four parts: setting up a simple React project, building the project, implementing unit tests and deploying the application on a local web server.</p>
<h3 id="1-setting-up-a-simple-react-project">1. Setting up a simple React project</h3>
<p><strong>i.</strong> Create a new folder for the project. In command prompt, run the following command to create <code>package.json</code> and provide basic project information:</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">npm init
</code></pre></div><p><strong>ii.</strong> Add React dependencies in your <code>package.json</code> using following command:</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">npm install react react-dom --save-dev
</code></pre></div><p>The <code>--save-dev</code> option downloads the specified libraries in the node_modules folder in your project root folder and adds their name and version numbers in <code>package.json</code> as <code>devDependencies</code>.</p>
<p><strong>iii.</strong> Create a new <code>src</code> folder and add <code>index.html</code> file in it with the following content:
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&#34;utf-8&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">link</span> <span class="na">href</span><span class="o">=</span><span class="s">&#39;http://fonts.googleapis.com/css?family=Roboto:400,300,700&#39;</span> <span class="na">rel</span><span class="o">=</span><span class="s">&#39;stylesheet&#39;</span> <span class="na">type</span><span class="o">=</span><span class="s">&#39;text/css&#39;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">link</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;css/styles.css&#34;</span> <span class="na">rel</span><span class="o">=</span><span class="s">&#34;stylesheet&#34;</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text/css&#34;</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;app&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;bundle.js&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span></code></pre></div></p>
<p><strong>iv</strong>. Create a sub-folder <code>js</code> in <code>src</code> and create our sole React component <code>src/js/app.js</code> as following:
<div class="highlight"><pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="kr">import</span> <span class="nx">React</span> <span class="nx">from</span> <span class="s1">&#39;react&#39;</span><span class="p">;</span>

<span class="kr">class</span> <span class="nx">App</span> <span class="kr">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span>
      <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;&lt;</span><span class="nx">h2</span><span class="o">&gt;</span><span class="nx">Helloooo</span> <span class="nx">World</span><span class="o">!!&lt;</span><span class="err">/h2&gt;&lt;/div&gt;</span>
    <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kr">export</span> <span class="k">default</span> <span class="nx">App</span><span class="p">;</span>
</code></pre></div>
Here, we have created a simple React component to display a message on the web page. But we need a way to hook this component into our base <code>index.html</code>.</p>
<p><strong>v.</strong> Create <code>index.js</code> in the <code>src</code> folder that would simply render the app component inside a div tag in <code>index.html</code>.
<div class="highlight"><pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="kr">import</span> <span class="nx">ReactDOM</span> <span class="nx">from</span> <span class="s1">&#39;react-dom&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">React</span> <span class="nx">from</span> <span class="s1">&#39;react&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">App</span> <span class="nx">from</span> <span class="s1">&#39;./js/app&#39;</span><span class="p">;</span>

<span class="nx">ReactDOM</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="o">&lt;</span><span class="nx">App</span><span class="o">/&gt;</span><span class="p">,</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&#34;app&#34;</span><span class="p">));</span>
</code></pre></div>
At this point your folder structure would look like this:</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">root
|____ node_modules
|____ package.json
|____ src
      |____ index.html
      |____ index.js
      |____ js
            |____ app.js
</code></pre></div><h3 id="2-building-the-project">2. Building the project</h3>
<p>In this part we would write a <code>Grunt</code> script to automate the task of compiling the project and creating a bundle. The bundle would be saved in <code>build</code> folder at the root level. We would use grunt plugins that would provide us some inbuilt tasks, which we can configure as per our requirement. Then we would write a custom grunt task to execute the plugin tasks in correct sequence.</p>
<p><strong>i.</strong> Add grunt to you project with the following command:</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">npm install grunt --save-dev
</code></pre></div><p><strong>ii.</strong> During our build process, our first step would be to delete the <code>build</code> folder. We need to add <code>grunt-contrib-clean</code> plugin to our project that would provide us with the <code>clean</code> task.</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">npm install grunt-contrib-clean --save-dev
</code></pre></div><p><strong>iii.</strong> We have the <code>grunt clean</code> task now. But we need to tell it which folders to delete. We need to load the <code>grunt-contrib-clean</code> task in the script using <code>grunt.loadNpmTasks</code> method and configure this task to delete the <code>build</code> folder using <code>grunt.initConfig</code> method. So now let&rsquo;s create <code>Gruntfile.js</code> in the root folder.
<div class="highlight"><pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="kd">var</span> <span class="nx">grunt</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;grunt&#39;</span><span class="p">);</span>

<span class="nx">grunt</span><span class="p">.</span><span class="nx">loadNpmTasks</span><span class="p">(</span><span class="s1">&#39;grunt-contrib-clean&#39;</span><span class="p">);</span>

<span class="nx">grunt</span><span class="p">.</span><span class="nx">initConfig</span><span class="p">({</span>
  <span class="nx">clean</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;build&#39;</span><span class="p">]</span>
<span class="p">});</span>
</code></pre></div></p>
<p><strong>iv.</strong> Next step is to copy our <code>index.html</code> as it is into the <code>build</code> folder. We do this so that later when we want to locally deploy the project, we can serve the base html file directly from the <code>build</code> folder along with the bundle. We need to add <code>grunt-contrib-copy</code> plugin to our project and configure the source and destination locations of the file to be copied.</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">npm install grunt-contrib-copy --save-dev
</code></pre></div><p>The <code>Gruntfile.js</code> would look like following:
<div class="highlight"><pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="kd">var</span> <span class="nx">grunt</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;grunt&#39;</span><span class="p">);</span>

<span class="nx">grunt</span><span class="p">.</span><span class="nx">loadNpmTasks</span><span class="p">(</span><span class="s1">&#39;grunt-contrib-clean&#39;</span><span class="p">);</span>
<span class="nx">grunt</span><span class="p">.</span><span class="nx">loadNpmTasks</span><span class="p">(</span><span class="s1">&#39;grunt-contrib-copy&#39;</span><span class="p">);</span>

<span class="nx">grunt</span><span class="p">.</span><span class="nx">initConfig</span><span class="p">({</span>
  <span class="nx">clean</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;build&#39;</span><span class="p">],</span>
  <span class="nx">copy</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">html</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">options</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">flatten</span><span class="o">:</span> <span class="kc">true</span>
      <span class="p">},</span>
      <span class="nx">files</span><span class="o">:</span> <span class="p">{</span>
        <span class="s1">&#39;build/index.html&#39;</span><span class="o">:</span> <span class="s1">&#39;src/index.html&#39;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div></p>
<p><strong>v.</strong> Now on to the compilation step. We would use <code>Babel</code> to both compile React code into plain JavaScript, as well as, ES2015 language features into older JS syntax. Babel provides us with presets for these transformations. A Babel preset is a collection of plugins to perform a particular task. We can include the Babel presets relevant to us as following:</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">npm install babel-preset-react babel-preset-es2015 --save-dev
</code></pre></div><p><strong>vi.</strong> Installing the Babel presets in our project isn’t enough. We need to enable them by adding <code>.babelrc</code> file as following in the root folder.</p>
<div class="highlight"><pre class="chroma"><code class="language-js" data-lang="js"><span class="p">{</span>
  <span class="s2">&#34;presets&#34;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&#34;react&#34;</span><span class="p">,</span> <span class="s2">&#34;es2015&#34;</span><span class="p">],</span>
<span class="p">}</span>
</code></pre></div><p><strong>vii.</strong> We are going to use <code>Browserify</code> as our bundling tool. It would first execute the transformation step and then it would create the <code>bundle.js</code>. Since we are using Babel in the first step, we need to get it working with Browserify. So we would add <code>Babelify</code>, a Babel transformer specifically created for Browserify, to our project.</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">npm install babelify --save-dev
</code></pre></div><p>We would also add the <code>grunt-browserify</code> plugin.</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">npm install grunt-browserify --save-dev
</code></pre></div><p><strong>viii.</strong> Now we need to configure the <code>browserify</code> task in our grunt script. We would specify <code>babelify</code> with appropriate presets as the transformer. We also need to specify the starting point of our React project. That would be <code>index.js</code>, where we hook up our React component into <code>index.html</code>. We also need to give the name and desired location of the bundle file.
<div class="highlight"><pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="kd">var</span> <span class="nx">grunt</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;grunt&#39;</span><span class="p">);</span>

<span class="nx">grunt</span><span class="p">.</span><span class="nx">loadNpmTasks</span><span class="p">(</span><span class="s1">&#39;grunt-contrib-clean&#39;</span><span class="p">);</span>
<span class="nx">grunt</span><span class="p">.</span><span class="nx">loadNpmTasks</span><span class="p">(</span><span class="s1">&#39;grunt-contrib-copy&#39;</span><span class="p">);</span>
<span class="nx">grunt</span><span class="p">.</span><span class="nx">loadNpmTasks</span><span class="p">(</span><span class="s1">&#39;grunt-browserify&#39;</span><span class="p">);</span>

<span class="nx">grunt</span><span class="p">.</span><span class="nx">initConfig</span><span class="p">({</span>
  <span class="nx">clean</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;build&#39;</span><span class="p">],</span>
  <span class="nx">copy</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">html</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">options</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">flatten</span><span class="o">:</span> <span class="kc">true</span>
      <span class="p">},</span>
      <span class="nx">files</span><span class="o">:</span> <span class="p">{</span>
        <span class="s1">&#39;build/index.html&#39;</span><span class="o">:</span> <span class="s1">&#39;src/index.html&#39;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="nx">browserify</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">dist</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">files</span><span class="o">:</span> <span class="p">{</span>
        <span class="s1">&#39;build/bundle.js&#39;</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;src/index.js&#39;</span><span class="p">]</span>
      <span class="p">},</span>
      <span class="nx">options</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">transform</span><span class="o">:</span> <span class="p">[[</span> <span class="s1">&#39;babelify&#39;</span><span class="p">,</span> <span class="p">{</span> <span class="s1">&#39;presets&#39;</span><span class="o">:</span> <span class="p">[</span> <span class="s1">&#39;es2015&#39;</span><span class="p">,</span> <span class="s1">&#39;react&#39;</span> <span class="p">]</span> <span class="p">}</span>  <span class="p">]]</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<strong>ix.</strong> Finally, we need to create a custom build task in the grunt file that should execute clean, copy and browserify tasks, in that order. Our final <code>Gruntfile.js</code> would look like this:
<div class="highlight"><pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="kd">var</span> <span class="nx">grunt</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;grunt&#39;</span><span class="p">);</span>

<span class="nx">grunt</span><span class="p">.</span><span class="nx">loadNpmTasks</span><span class="p">(</span><span class="s1">&#39;grunt-contrib-clean&#39;</span><span class="p">);</span>
<span class="nx">grunt</span><span class="p">.</span><span class="nx">loadNpmTasks</span><span class="p">(</span><span class="s1">&#39;grunt-contrib-copy&#39;</span><span class="p">);</span>
<span class="nx">grunt</span><span class="p">.</span><span class="nx">loadNpmTasks</span><span class="p">(</span><span class="s1">&#39;grunt-browserify&#39;</span><span class="p">);</span>

<span class="nx">grunt</span><span class="p">.</span><span class="nx">initConfig</span><span class="p">({</span>
  <span class="nx">clean</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;build&#39;</span><span class="p">],</span>
  <span class="nx">copy</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">html</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">options</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">flatten</span><span class="o">:</span> <span class="kc">true</span>
      <span class="p">},</span>
      <span class="nx">files</span><span class="o">:</span> <span class="p">{</span>
        <span class="s1">&#39;build/index.html&#39;</span><span class="o">:</span> <span class="s1">&#39;src/index.html&#39;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="nx">browserify</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">dist</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">files</span><span class="o">:</span> <span class="p">{</span>
        <span class="s1">&#39;build/bundle.js&#39;</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;src/index.js&#39;</span><span class="p">]</span>
      <span class="p">},</span>
      <span class="nx">options</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">transform</span><span class="o">:</span> <span class="p">[[</span> <span class="s1">&#39;babelify&#39;</span><span class="p">,</span> <span class="p">{</span> <span class="s1">&#39;presets&#39;</span><span class="o">:</span> <span class="p">[</span> <span class="s1">&#39;es2015&#39;</span><span class="p">,</span> <span class="s1">&#39;react&#39;</span> <span class="p">]</span> <span class="p">}</span>  <span class="p">]]</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="nx">grunt</span><span class="p">.</span><span class="nx">registerTask</span><span class="p">(</span><span class="s1">&#39;build&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;clean&#39;</span><span class="p">,</span> <span class="s1">&#39;copy:html&#39;</span><span class="p">,</span> <span class="s1">&#39;browserify:dist&#39;</span><span class="p">]);</span>
</code></pre></div>
At this point our project structure would look like this:</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">root
|____ .babelrc
|____ build
|____ Gruntfile.js
|____ node_modules
|____ package.json
|____ src
      |____ index.html
      |____ index.js
      |____ js
            |____ app.js
</code></pre></div><h3 id="3-adding-unit-tests">3. Adding unit tests</h3>
<p><strong>i.</strong> We would use <code>Mocha</code> as our primary test runner. For an expressive assertion library we would use <code>Chai</code>. We also need to add two other testing libraries – <code>Enzyme</code> and <code>react-addons-test-utils</code>. These are React specific. To run tests in a simulated browser environment, we need <code>jsdom</code>.</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">npm install --save-dev mocha chai enzyme jsdom react-addons-test-utils
</code></pre></div><p><strong>ii.</strong> We would create a new <code>test</code> folder in our root folder. To test our components in a realistic browser environment, we need to create a setup file <code>browser.js</code> in our test folder as following:
<div class="highlight"><pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;babel-register&#39;</span><span class="p">)();</span>

<span class="kd">var</span> <span class="nx">jsdom</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;jsdom&#39;</span><span class="p">).</span><span class="nx">jsdom</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">exposedProperties</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;window&#39;</span><span class="p">,</span> <span class="s1">&#39;navigator&#39;</span><span class="p">,</span> <span class="s1">&#39;document&#39;</span><span class="p">];</span>

<span class="nx">global</span><span class="p">.</span><span class="nb">document</span> <span class="o">=</span> <span class="nx">jsdom</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">);</span>
<span class="nx">global</span><span class="p">.</span><span class="nb">window</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">defaultView</span><span class="p">;</span>
<span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">defaultView</span><span class="p">).</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">property</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">global</span><span class="p">[</span><span class="nx">property</span><span class="p">]</span> <span class="o">===</span> <span class="s1">&#39;undefined&#39;</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">exposedProperties</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">property</span><span class="p">);</span>
    <span class="nx">global</span><span class="p">[</span><span class="nx">property</span><span class="p">]</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">defaultView</span><span class="p">[</span><span class="nx">property</span><span class="p">];</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="nx">global</span><span class="p">.</span><span class="nx">navigator</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">userAgent</span><span class="o">:</span> <span class="s1">&#39;node.js&#39;</span>
<span class="p">};</span>

<span class="nx">documentRef</span> <span class="o">=</span> <span class="nb">document</span><span class="p">;</span>
</code></pre></div>
<strong>iii.</strong> To have our <code>test</code> folder structure mirror the <code>src</code> folder, we would create <code>test/js</code> sub folder. Here, we can create an <code>app.spec.js</code> file that would contain unit tests specific to the <code>App</code> component. We can write a test case to assert the message being displayed by this component as following:
<div class="highlight"><pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="kr">import</span> <span class="nx">React</span> <span class="nx">from</span> <span class="s1">&#39;react&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">expect</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;chai&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">mount</span><span class="p">,</span> <span class="nx">shallow</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;enzyme&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">App</span> <span class="nx">from</span> <span class="s1">&#39;../../src/js/app&#39;</span><span class="p">;</span>

<span class="nx">describe</span><span class="p">(</span><span class="s1">&#39;&lt;App /&gt;&#39;</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="nx">it</span><span class="p">(</span><span class="s1">&#39;should render the hello world message&#39;</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">wrapper</span> <span class="o">=</span> <span class="nx">shallow</span><span class="p">(</span><span class="o">&lt;</span><span class="nx">App</span><span class="o">/&gt;</span><span class="p">);</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">wrapper</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s1">&#39;h2&#39;</span><span class="p">).</span><span class="nx">text</span><span class="p">()).</span><span class="nx">to</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="s1">&#39;Helloooo World!!&#39;</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre></div>
<strong>iv.</strong> Finally, we need to add the following <code>scripts</code> block in <code>package.json</code>. Now unit tests throughout the project can be run with <code>npm test</code> command. Alternatively, a task to run the unit tests can also be created in the grunt script.</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">&#34;scripts&#34;: {
    &#34;test&#34;: &#34;mocha test/browser.js test/**/*.spec.js&#34;
}
</code></pre></div><h3 id="4-deploying-the-application-on-a-local-web-server">4. Deploying the application on a local web server</h3>
<p><strong>i.</strong> We will use <code>Express</code>, a web application framework provided by Node.js.</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">npm install express --save
</code></pre></div><p><strong>ii.</strong> Then we need to create a <code>server.js</code> file in the root folder. In this file, we specify the location of the html that is to be served on the browser and the port number on which the server should run.
<div class="highlight"><pre class="chroma"><code class="language-JavaScript" data-lang="JavaScript"><span class="kd">var</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;express&#39;</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="s2">&#34;/&#34;</span><span class="p">,</span> <span class="nx">express</span><span class="p">.</span><span class="kr">static</span><span class="p">(</span><span class="s2">&#34;build&#34;</span><span class="p">));</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">sendFile</span><span class="p">(</span><span class="s1">&#39;index.html&#39;</span><span class="p">,</span>  <span class="p">{</span> <span class="nx">root</span><span class="o">:</span> <span class="s2">&#34;build&#34;</span> <span class="p">});</span>
<span class="p">});</span>

<span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="s2">&#34;3000&#34;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Starting server..&#39;</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<strong>iii.</strong> Use <code>npm start</code> to start the server and open <a href="http://localhost:3000">http://localhost:3000</a> on the browser.</p>
<p>The final project structure will look like this:</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">root
|____ .babelrc
|____ build
|____ Gruntfile.js
|____ node_modules
|____ package.json
|____ server.js
|____ src
|     |____ index.html
|     |____ index.js
|     |____ js
|           |____ app.js
|____ test
      |____ browser.js
      |____ js
            |____ app.spec.js
</code></pre></div>

        
          <div class="blog-tags">
            
              <a href="https://sskelkar.github.io//tags/javascript/">JavaScript</a>&nbsp;
            
              <a href="https://sskelkar.github.io//tags/unit-testing/">Unit Testing</a>&nbsp;
            
          </div>
        

        

        
          
            
          

          
                  <h4 class="see-also">See also</h4>
                  <ul>
                
                
                    <li><a href="/post/db-integration-tests-for-spring-app/">Database integration tests for a Spring application</a></li>
                
                    <li><a href="/post/how-unit-testing-leads-to-improved-code/">How unit testing leads to improved code</a></li>
                
                    <li><a href="/post/closures-in-javascript/">Closures in JavaScript</a></li>
                
                    <li><a href="/post/dependency-injection-in-angularjs-1x/">Dependency Injection in AngularJS 1.x</a></li>
                
              </ul>

          
        
      </article>

      
        <ul class="pager blog-pager">
          
            <li class="previous">
              <a href="https://sskelkar.github.io/post/hystrix-a-simple-use-case/" data-toggle="tooltip" data-placement="top" title="Hystrix – a simple use case">&larr; Previous Post</a>
            </li>
          
          
            <li class="next">
              <a href="https://sskelkar.github.io/post/using-thread-dumps-to-analyze-deadlocks/" data-toggle="tooltip" data-placement="top" title="Using thread dumps to analyse deadlocks">Next Post &rarr;</a>
            </li>
          
        </ul>
      


      
        
        
      

    </div>
  </div>
</div>

      
<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links">
          
              <li>
                <a href="mailto:sojjwalkelkar@gmail.com" title="Email me">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fas fa-envelope fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://github.com/sskelkar" title="GitHub">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-github fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://linkedin.com/in/sskelkar" title="LinkedIn">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-linkedin fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
          
          <li>
            <a href="" title="RSS">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="fas fa-rss fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
        </ul>
        <p class="credits copyright text-muted">
          
            
              Sojjwal Kelkar
            
          

          &nbsp;&bull;&nbsp;&copy;
          
            2020
          

          
            &nbsp;&bull;&nbsp;
            <a href="https://sskelkar.github.io/">Sojjwal Kelkar</a>
          
        </p>
        
        <p class="credits theme-by text-muted">
          &bull;&nbsp;Powered by Hugo&nbsp;&bull;&nbsp;
          
        </p>
      </div>
    </div>
  </div>
</footer><script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.js" integrity="sha384-K3vbOmF2BtaVai+Qk37uypf7VrgBubhQreNQe9aGsz9lB63dIFiQVlJbr92dw2Lx" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/contrib/auto-render.min.js" integrity="sha384-kmZOZB5ObwgQnS/DuDg6TScgOiWWBiVt0plIRkZCmE6rDZGrEOQeHM5PcHi+nyqe" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<script src="https://sskelkar.github.io/js/main.js"></script>
<script src="https://sskelkar.github.io/js/highlight.min.js"></script>
<script> hljs.initHighlightingOnLoad(); </script>
<script> $(document).ready(function() {$("pre.chroma").css("padding","0");}); </script><script> renderMathInElement(document.body); </script><script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.js" integrity="sha384-QELNnmcmU8IR9ZAykt67vGr9/rZJdHbiWi64V88fCPaOohUlHCqUD/unNN0BXSqy" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe-ui-default.min.js" integrity="sha384-m67o7SkQ1ALzKZIFh4CiTA8tmadaujiTa9Vu+nqPSwDOqHrDmxLezTdFln8077+q" crossorigin="anonymous"></script><script src="https://sskelkar.github.io/js/load-photoswipe.js"></script>









    
  </body>
</html>

